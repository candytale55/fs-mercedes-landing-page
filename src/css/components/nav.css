/**
 * NAVIGATION COMPONENT
 * Site header navigation with mobile overlay menu and desktop horizontal layout.
 * Applied to: <header> in index.html
 * Mobile: Full-screen slide-in overlay from right (< 550px)
 * Desktop: Horizontal inline navigation (≥ 550px)
 */

/* Header grid layout - Logo on left, secondary nav on right */
.header-layout {
  display: grid;
  grid-template-columns: 1fr auto; /* Logo takes available space, secondary nav sizes to content */
  align-items: center;
  gap: var(--nav-section-gap); /* 2rem (32px) */
}

/* ==== Primary navigation: Logo + menu links ==== */

/* Main nav container - Houses logo and primary menu */
.main-nav {
  display: flex;
  align-items: center;
  gap: var(--nav-section-gap); /* 2rem (32px) */
}

/* ==== Secondary navigation: Icons + burger button ==== */

/* Secondary nav container - Always visible on right */
.secondary-nav {
  flex: 0 0 auto; /* Prevents shrinking/growing - maintains fixed size */
  justify-self: end; /* Aligns to right edge of grid cell */
  white-space: nowrap; /* Prevents icon wrapping */
}

/* Secondary nav list - Horizontal icon arrangement */
.secondary-nav-list {
  display: flex;
  flex-direction: row;
  justify-content: end;
  align-items: center;
  gap: var(--nav-section-gap); /* 2rem (32px) */
}

/* ===== MOBILE OVERLAY MENU (< 550px) ===== */

@media (max-width: 549px) {
  /* Primary menu becomes full-screen overlay */
  #primary-menu.main-nav-list {
    position: fixed;
    inset: 0; /* Shorthand for top: 0; right: 0; bottom: 0; left: 0 - covers viewport */
    z-index: 1000; /* Above all other content */

    display: flex;
    flex-direction: column;
    gap: var(--spacing-section-medium); /* 3rem (48px) */
    align-items: center;

    margin: 0;
    padding: var(--spacing-section-large) 0; /* 4rem (64px) vertical padding */

    background-color: var(--color-background-page);
    color: var(--color-text-primary);

    /* Closed state - Menu slides off-screen to the right */
    transform: translateX(100%); /* Moves entire width to the right */
    visibility: hidden; /* Hides from screen readers when closed */
    pointer-events: none; /* Prevents interaction when closed */

    /* Staggered transition - Transform animates, then visibility changes */
    transition: transform var(--transition-speed) var(--transition-timing),
      visibility 0s var(--transition-speed); /* Visibility delay prevents flash */
  }

  /* Menu links fade out when closed */
  #primary-menu.main-nav-list > * {
    opacity: 0;
    transition: opacity 0.15s ease-in-out;
  }

  /* Open state - Menu slides in from right */
  #primary-menu.main-nav-list.is-open {
    transform: translateX(0); /* Returns to natural position */
    visibility: visible; /* Visible to screen readers */
    pointer-events: auto; /* Restores interaction */
    transition-delay: 0s; /* No delay on opening */
  }

  /* Menu links fade in after slide animation */
  #primary-menu.main-nav-list.is-open > * {
    opacity: 1;
    transition-delay: 0.2s; /* Waits for slide animation to nearly finish */
  }

  /* Larger text for mobile overlay */
  .nav-link {
    font-size: var(--font-size-mobile-menu); /* 1.5rem (24px) */
  }

  /* Close button - Fixed in top-right corner */
  .nav-close {
    position: absolute;
    top: var(--spacing-page); /* 1.5rem (24px) */
    right: var(--spacing-page); /* 1.5rem (24px) */
    font-size: var(--font-size-mobile-menu); /* 1.5rem (24px) */
    line-height: 1; /* Removes extra space around icon */
  }
}

/* ===== DESKTOP NAVIGATION (≥ 550px) ===== */

@media (min-width: 550px) {
  /* Primary menu returns to inline horizontal layout */
  #primary-menu.main-nav-list {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: var(--nav-section-gap); /* 2rem (32px) */

    /* Reset mobile overlay properties */
    position: static; /* Returns to document flow */
    transform: none; /* Removes slide transform */
    visibility: visible;
    pointer-events: auto;
    opacity: 1;

    /* Disable transitions to prevent flash during resize */
    transition: none !important;
  }

  /* Ensure menu links are visible on desktop */
  #primary-menu.main-nav-list > * {
    opacity: 1;
    transition: none; /* No fade animation on desktop */
  }

  /* Hide mobile-only controls on desktop */
  .nav-toggle,
  .nav-close {
    display: none;
  }
}
